//doing: StreamCSVRows
{
  "created_at": "2021-05-14T09:49:11.500259Z",
  "data": {
    "name": "08eda1d1-df67-499a-a545-b5223292b19f/--v-filtered-2021-05-14T09-49-11Z"
  },
  "event": "storing filtered dataset file",
  "namespace": "dp-dataset-exporter",
  "severity": 3
}
{
  "created_at": "2021-05-14T09:49:11.500764Z",
  "data": {
    "bucket": "csv-exported",
    "name": "filtered-datasets/08eda1d1-df67-499a-a545-b5223292b19f/--v-filtered-2021-05-14T09-49-11Z.csv"
  },
  "event": "uploading private file to S3",
  "namespace": "dp-dataset-exporter",
  "severity": 3
}
{
  "created_at": "2021-05-14T09:49:11.501325Z",
  "data": {
    "vault_path": "secret/shared/psk/--v-filtered-2021-05-14T09-49-11Z.csv"
  },
  "event": "writing key to vault",
  "namespace": "dp-dataset-exporter",
  "severity": 3
}
{
  "created_at": "2021-05-14T09:49:11.504604Z",
  "data": {
    "dataset_id": "",
    "edition": "",
    "filter_id": "08eda1d1-df67-499a-a545-b5223292b19f",
    "published": false,
    "version": ""
  },
  "error": {
    "data": {
      "Errors": null,
      "HTTPMethod": "PUT",
      "RawError": false,
      "StatusCode": 404,
      "URL": "http://127.0.0.1:8200/v1/secret/shared/psk/--v-filtered-2021-05-14T09-49-11Z.csv"
    },
    "error": "Error making API request.\n\nURL: PUT http://127.0.0.1:8200/v1/secret/shared/psk/--v-filtered-2021-05-14T09-49-11Z.csv\nCode: 404. Errors:\n\n",
    "stack_trace": [
      {
        "file": "/Users/rhysdavies/src/github.com/ONSdigital/dp-dataset-exporter/event/handler.go",
        "function": "github.com/ONSdigital/dp-dataset-exporter/event.(*ExportHandler).Handle",
        "line": 128
      },
      {
        "file": "/Users/rhysdavies/src/github.com/ONSdigital/dp-dataset-exporter/event/consumer.go",
        "function": "github.com/ONSdigital/dp-dataset-exporter/event.processMessage",
        "line": 131
      },
      {
        "file": "/Users/rhysdavies/src/github.com/ONSdigital/dp-dataset-exporter/event/consumer.go",
        "function": "github.com/ONSdigital/dp-dataset-exporter/event.(*Consumer).Consume.func1",
        "line": 64
      },
      {
        "file": "/usr/local/opt/go@1.15.8/go/src/runtime/asm_amd64.s",
        "function": "runtime.goexit",
        "line": 1374
      }
    ]
  },
  "event": "error handling filter job",
  "namespace": "dp-dataset-exporter",
  "severity": 1
}
{
  "created_at": "2021-05-14T09:49:11.506841Z",
  "data": {
    "error": "Error making API request.\n\nURL: PUT http://127.0.0.1:8200/v1/secret/shared/psk/--v-filtered-2021-05-14T09-49-11Z.csv\nCode: 404. Errors:\n\n",
    "filter_id": "08eda1d1-df67-499a-a545-b5223292b19f"
  },
  "event": "an error occurred while processing a filter job",
  "namespace": "dp-dataset-exporter",
  "severity": 3
}
{
  "created_at": "2021-05-14T09:49:11.507446Z",
  "data": {
    "event": {
      "DatasetID": "",
      "Edition": "",
      "FilterID": "08eda1d1-df67-499a-a545-b5223292b19f",
      "InstanceID": "",
      "Version": ""
    },
    "message_error": "failed to handle event",
    "message_offset": 1
  },
  "error": {
    "data": {
      "Errors": null,
      "HTTPMethod": "PUT",
      "RawError": false,
      "StatusCode": 404,
      "URL": "http://127.0.0.1:8200/v1/secret/shared/psk/--v-filtered-2021-05-14T09-49-11Z.csv"
    },
    "error": "Error making API request.\n\nURL: PUT http://127.0.0.1:8200/v1/secret/shared/psk/--v-filtered-2021-05-14T09-49-11Z.csv\nCode: 404. Errors:\n\n",
    "stack_trace": [
      {
        "file": "/Users/rhysdavies/src/github.com/ONSdigital/dp-dataset-exporter/event/consumer.go",
        "function": "github.com/ONSdigital/dp-dataset-exporter/event.processMessage",
        "line": 135
      },
      {
        "file": "/Users/rhysdavies/src/github.com/ONSdigital/dp-dataset-exporter/event/consumer.go",
        "function": "github.com/ONSdigital/dp-dataset-exporter/event.(*Consumer).Consume.func1",
        "line": 64
      },
      {
        "file": "/usr/local/opt/go@1.15.8/go/src/runtime/asm_amd64.s",
        "function": "runtime.goexit",
        "line": 1374
      }
    ]
  },
  "event": "handle error",
  "namespace": "dp-dataset-exporter",
  "severity": 1
}
{
  "created_at": "2021-05-14T09:49:11.509414Z",
  "data": {
    "message_offset": 1,
    "worker": 1
  },
  "error": {
    "data": {
      "Errors": null,
      "HTTPMethod": "PUT",
      "RawError": false,
      "StatusCode": 404,
      "URL": "http://127.0.0.1:8200/v1/secret/shared/psk/--v-filtered-2021-05-14T09-49-11Z.csv"
    },
    "error": "Error making API request.\n\nURL: PUT http://127.0.0.1:8200/v1/secret/shared/psk/--v-filtered-2021-05-14T09-49-11Z.csv\nCode: 404. Errors:\n\n",
    "stack_trace": [
      {
        "file": "/Users/rhysdavies/src/github.com/ONSdigital/dp-dataset-exporter/event/consumer.go",
        "function": "github.com/ONSdigital/dp-dataset-exporter/event.(*Consumer).Consume.func1",
        "line": 66
      },
      {
        "file": "/usr/local/opt/go@1.15.8/go/src/runtime/asm_amd64.s",
        "function": "runtime.goexit",
        "line": 1374
      }
    ]
  },
  "event": "failed to process message",
  "namespace": "dp-dataset-exporter",
  "severity": 1
}
{
  "created_at": "2021-05-14T09:49:11.544724Z",
  "data": {
    "message_offset": 1,
    "worker": 1
  },
  "event": "message committed and released",
  "namespace": "dp-dataset-exporter",
  "severity": 3
}

above with vault 1.5.1
-=-=-

below with vault 0.9.5

-=-=-
doing: StreamCSVRows
{
  "created_at": "2021-05-14T12:30:15.303087Z",
  "data": {
    "name": "08eda1d1-df67-499a-a545-b5223292b19f/--v-filtered-2021-05-14T12-30-15Z"
  },
  "event": "storing filtered dataset file",
  "namespace": "dp-dataset-exporter",
  "severity": 3
}
{
  "created_at": "2021-05-14T12:30:15.303475Z",
  "data": {
    "bucket": "csv-exported",
    "name": "filtered-datasets/08eda1d1-df67-499a-a545-b5223292b19f/--v-filtered-2021-05-14T12-30-15Z.csv"
  },
  "event": "uploading private file to S3",
  "namespace": "dp-dataset-exporter",
  "severity": 3
}
{
  "created_at": "2021-05-14T12:30:15.303991Z",
  "data": {
    "vault_path": "secret/shared/psk/--v-filtered-2021-05-14T12-30-15Z.csv"
  },
  "event": "writing key to vault",
  "namespace": "dp-dataset-exporter",
  "severity": 3
}
{
  "created_at": "2021-05-14T12:30:15.305174Z",
  "data": {
    "dataset_id": "",
    "edition": "",
    "filter_id": "08eda1d1-df67-499a-a545-b5223292b19f",
    "published": false,
    "version": ""
  },
  "error": {
    "data": {
      "Errors": [
        "permission denied"
      ],
      "HTTPMethod": "PUT",
      "RawError": false,
      "StatusCode": 403,
      "URL": "http://127.0.0.1:8200/v1/secret/shared/psk/--v-filtered-2021-05-14T12-30-15Z.csv"
    },
    "error": "Error making API request.\n\nURL: PUT http://127.0.0.1:8200/v1/secret/shared/psk/--v-filtered-2021-05-14T12-30-15Z.csv\nCode: 403. Errors:\n\n* permission denied",
    "stack_trace": [
      {
        "file": "/Users/rhysdavies/src/github.com/ONSdigital/dp-dataset-exporter/event/handler.go",
        "function": "github.com/ONSdigital/dp-dataset-exporter/event.(*ExportHandler).Handle",
        "line": 128
      },
      {
        "file": "/Users/rhysdavies/src/github.com/ONSdigital/dp-dataset-exporter/event/consumer.go",
        "function": "github.com/ONSdigital/dp-dataset-exporter/event.processMessage",
        "line": 131
      },
      {
        "file": "/Users/rhysdavies/src/github.com/ONSdigital/dp-dataset-exporter/event/consumer.go",
        "function": "github.com/ONSdigital/dp-dataset-exporter/event.(*Consumer).Consume.func1",
        "line": 64
      },
      {
        "file": "/usr/local/opt/go@1.15.8/go/src/runtime/asm_amd64.s",
        "function": "runtime.goexit",
        "line": 1374
      }
    ]
  },
  "event": "error handling filter job",
  "namespace": "dp-dataset-exporter",
  "severity": 1
}
{
  "created_at": "2021-05-14T12:30:15.311404Z",
  "data": {
    "error": "Error making API request.\n\nURL: PUT http://127.0.0.1:8200/v1/secret/shared/psk/--v-filtered-2021-05-14T12-30-15Z.csv\nCode: 403. Errors:\n\n* permission denied",
    "filter_id": "08eda1d1-df67-499a-a545-b5223292b19f"
  },
  "event": "an error occurred while processing a filter job",
  "namespace": "dp-dataset-exporter",
  "severity": 3
}
{
  "created_at": "2021-05-14T12:30:15.311974Z",
  "data": {
    "event": {
      "DatasetID": "",
      "Edition": "",
      "FilterID": "08eda1d1-df67-499a-a545-b5223292b19f",
      "InstanceID": "",
      "Version": ""
    },
    "message_error": "failed to handle event",
    "message_offset": 14
  },
  "error": {
    "data": {
      "Errors": [
        "permission denied"
      ],
      "HTTPMethod": "PUT",
      "RawError": false,
      "StatusCode": 403,
      "URL": "http://127.0.0.1:8200/v1/secret/shared/psk/--v-filtered-2021-05-14T12-30-15Z.csv"
    },
    "error": "Error making API request.\n\nURL: PUT http://127.0.0.1:8200/v1/secret/shared/psk/--v-filtered-2021-05-14T12-30-15Z.csv\nCode: 403. Errors:\n\n* permission denied",
    "stack_trace": [
      {
        "file": "/Users/rhysdavies/src/github.com/ONSdigital/dp-dataset-exporter/event/consumer.go",
        "function": "github.com/ONSdigital/dp-dataset-exporter/event.processMessage",
        "line": 135
      },
      {
        "file": "/Users/rhysdavies/src/github.com/ONSdigital/dp-dataset-exporter/event/consumer.go",
        "function": "github.com/ONSdigital/dp-dataset-exporter/event.(*Consumer).Consume.func1",
        "line": 64
      },
      {
        "file": "/usr/local/opt/go@1.15.8/go/src/runtime/asm_amd64.s",
        "function": "runtime.goexit",
        "line": 1374
      }
    ]
  },
  "event": "handle error",
  "namespace": "dp-dataset-exporter",
  "severity": 1
}
{
  "created_at": "2021-05-14T12:30:15.313881Z",
  "data": {
    "message_offset": 14,
    "worker": 1
  },
  "error": {
    "data": {
      "Errors": [
        "permission denied"
      ],
      "HTTPMethod": "PUT",
      "RawError": false,
      "StatusCode": 403,
      "URL": "http://127.0.0.1:8200/v1/secret/shared/psk/--v-filtered-2021-05-14T12-30-15Z.csv"
    },
    "error": "Error making API request.\n\nURL: PUT http://127.0.0.1:8200/v1/secret/shared/psk/--v-filtered-2021-05-14T12-30-15Z.csv\nCode: 403. Errors:\n\n* permission denied",
    "stack_trace": [
      {
        "file": "/Users/rhysdavies/src/github.com/ONSdigital/dp-dataset-exporter/event/consumer.go",
        "function": "github.com/ONSdigital/dp-dataset-exporter/event.(*Consumer).Consume.func1",
        "line": 66
      },
      {
        "file": "/usr/local/opt/go@1.15.8/go/src/runtime/asm_amd64.s",
        "function": "runtime.goexit",
        "line": 1374
      }
    ]
  },
  "event": "failed to process message",
  "namespace": "dp-dataset-exporter",
  "severity": 1
}
{
  "created_at": "2021-05-14T12:30:15.330688Z",
  "data": {
    "message_offset": 14,
    "worker": 1
  },
  "event": "message committed and released",
  "namespace": "dp-dataset-exporter",
  "severity": 3
}
